Heboris C++ Port (Mac OS X) C7V4EX 2007/11/23

フリーソフトのHeboris2001(作者:ほしけん氏 http://www.hosiken.com/)を
2chのみんなでバージョンアップした非公式版(バージョンC7V4EX)を
無理矢理Mac OS Xに移植しました。SDL版、SDL+OpenGL版があります。
※ 公開にあたり、原作者より公開許可を頂いてます。


はじめに
・ OpenGL版・SDL版に使う漢字フォントが、exe/kanjifont フォルダに含まれています。
   初期状態では東雲フォント (http://openlab.jp/efont/shinonome/) が入ってます。
   しかし、低解像度版で使用するフォントがライセンスの関係で含まれていませんので
   「ナガ10」(http://hp.vector.co.jp/authors/VA013391/fonts/) というフォントを
   別途入手して、knj10-1.1.tar.gz に含まれる「knj10.bdf」「5x10a.bdf」を
   exe/kanjifont フォルダに入れてください。
   なくても動きますが、低解像度時のミッションモードの文字表示が少し切れたりします。
・ ゲームパッドが使用可能ですが、最初方向キーが入りっぱなしになります。 (SDLのバグです)
   この場合、方向キーをぐるりと一回転させてください。
   以降問題なく操作できるようになります。


開発環境・動作確認済み環境
・ Mac OS X Tiger (10.4.11)
・ Mac mini (Intel Core Duo メモリ1GB) オンボードグラフィック
・ Xcode V2.3
   http://luna.sumomo.ne.jp/


使用ライブラリ
・ SDL
   http://www.libsdl.org/download-1.2.php
・ SDL-image
   http://www.libsdl.org/projects/SDL_image/
・ SDL-mixer
   http://www.libsdl.org/projects/SDL_mixer/


注意
・ 改造版について絶対にヘボリス原作者に問い合わせないでください。迷惑がかかります。
   わからないことは、極力調べ尽くしたうえで2chのヘボリススレあたりで聞きましょう。


使い方
・ 自分でビルドしたいのでなければ、exeフォルダの下にある実行ファイルを
   そのまま実行すればいいです。


去年公開されたC++版からの改良点
・ フルスクリーン、320x240の解像度に対応しました。
・ 800x600以上のウインドウモードに対応しました。(DirectX版、OpenGL版のみ)
・ SDL版でもミッションモードのテキストが表示されるようになりました。
・ iniファイルで、文字列の項目(ツモ、プリセット名)に対応しました。
・ C++版固有の設定が heboris_cpp.ini ファイルでできるようになりました。
・ WAVやMP3のBGMがちゃんと再生されるようになりました。
・ OGGやMOD形式のBGMに対応しました。
・ DirectX版のBGM再生にDirectSoundを使うのをやめ、kbgm32.dll を使うようにしました。


YGS2K版からの変更点
・ ブロックの落下をスムーズモードにした際の表示不具合を修正しました。
・ BGMにOGG、MODが使えるようになりました。コンフィグからBGMの種類を設定してください。
   modで拡張子が違うものを混在させたい場合は、リネームついでに統一させてください。
   (読み込み時に、拡張子ではなくて中身のデータ形式で判別してるのでこれだけでOKです)
・ bgm.mid の垂れ流してはないMIDIのBGMが使えるようになりました。
   MP3・WAVなどと同じように、状況に応じたファイル名のMIDIファイルを再生できます。
   従来の bgm.mid 垂れ流しの設定名は、「MIDI(SIMPLE)」になりました。
・ heboris.ini で、数値に式が使えません。(40 * 60 とかはだめ。2400 と書いてください)
・ 某スーパープレイビデオ風鏡像表示など、一部未実装の機能があります。


補足事項
・ pngが読めるので、グラフィックをpngにしています。透過pngの透過部分が透過します。


補足事項
・ SDL版・OpenGL版は、画面描画以外の部分はお互い一緒です。
・ SDL版の拡大縮小描画は誤魔化しながらやってるので、透過部分が抜けないなどの
   仕様があります。
・ BGMはMIDI・MP3・OGG・WAVに対応しています。
   SDL_MixerのMP3・OGG対応版は以下から頂きました。
   http://www.libsdl.org/projects/SDL_mixer/
・ ブロックを消した瞬間にがくっと重くなる場合は、
   オプションからブロック破壊エフェクトをオフにしてください。


ありがとうございます
・ 有用なライブラリを作成された方々、そしてHeborisをここまで
   作り上げた方々に感謝です。みなさんのおかげさまです。した。
・ 去年名無しさんにより公開された、Mac OS X 版ヘボリス 旧バージョンを
   大いに参考にさせていただきました。ありがとうございました。
